{
  "openapi": "3.0.1",
  "info": {
    "title": "ProjectX Music API",
    "version": "1.0.0",
    "description": "API for controlling Spotify playback dynamically during Project X battles and events."
  },
  "servers": [
    {
      "url": "https://projectxmusic.onrender.com"
    }
  ],
  "paths": {
    "/play": {
      "post": {
        "summary": "Play a specific Spotify track",
        "description": "Plays a given Spotify track using its URI.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "trackUri": {
                    "type": "string",
                    "example": "spotify:track:3n3Ppam7vgaVa1iaRUc9Lp"
                  }
                },
                "required": ["trackUri"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Track playback started"
          }
        }
      }
    },
    "/pause": {
      "post": {
        "summary": "Pause Spotify playback",
        "description": "Pauses the current Spotify track.",
        "responses": {
          "200": {
            "description": "Playback paused"
          }
        }
      }
    },
    "/event": {
      "post": {
        "summary": "Trigger a battle/event theme",
        "description": "Sets the battle music depending on the type of event.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "eventType": {
                    "type": "string",
                    "example": "boss_phase_1",
                    "description": "Type of event, e.g. boss_phase_1, boss_phase_2, ambush, victory"
                  }
                },
                "required": ["eventType"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Event music triggered"
          }
        }
      }
    },
    "/autoTrack": {
      "post": {
        "summary": "Automatically select fitting music",
        "description": "GPT chooses a track from Spotify that fits the current battle or scene.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "sceneDescription": {
                    "type": "string",
                    "example": "An intense fight against a towering demon lord in a collapsing castle"
                  }
                },
                "required": ["sceneDescription"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Track automatically selected and playing"
          }
        }
      }
    }
  }
}
